{% extends "master.twig" %}

{% block content %}
    
        
{% include "partials/header.twig" with {'post': post, 'headerimage': true} %}     
   
<div x-data="{filter: window.location.hash.substring(1)}" class="bg-gray-100">
    <section class="bg-gray-200">
        <div class="flex flex-col md:flex-row items-center max-w-screen-xl mx-auto pt-10">
            <ul class="">
                <li class="inline-block">
                    <span :class="{'bg-gray-100': filter === ''}" 
                    class="px-5 cursor-pointer py-2 rounded-t-xl inline-block" @click="filter = ''" href="#">{{ __("All", "ctx-theme") }}</span>
                </li>
                {% for term in terms %}
                    <li class="inline-block"><span :class="{'bg-gray-100': filter === '{{term.slug}}'}" class="ml-2 cursor-pointer px-5 py-2 inline-block rounded-txl" @click="filter = '{{term.slug}}'">{{term.name}}</span></li>
                {% endfor %}
            </ul>
        </div>
    </section>
    <section class="py-16">
        <div class="card-collection">        
            {% for event in events %}
                <a href="/{{site.option('dbem_cp_events_slug')}}/{{event.slug}}" 
                    x-show="filter == '' || [{% for term in event.terms('event-categories') %}'{{term.slug}}'{% endfor %}].includes(filter)" 
                    class="card {{ site.option("dbem_thumbnails_enabled") == 1 ? 'no-image' : 'image-top' }} bg-white {{ loop.first ? "first" }} {{ loop.last ? "last" }} hover event {% for term in event.get_terms('event-categories') %}{{term.slug}}{% endfor %}"
                    x-transition:enter="transition ease-out duration-300"
                    x-transition:enter-start="opacity-0 transform scale-90"
                    x-transition:enter-end="opacity-100 transform scale-100"
                    x-transition:leave="transition ease-in duration-300"
                    x-transition:leave-start="opacity-100 transform scale-100"
                    x-transition:leave-end="opacity-0 transform scale-90"
                >
                
                    
                    {% if site.option("dbem_thumbnails_enabled") != 1 %} 
                    
                    <img src="{{ event.thumbnail.src('medium') }}" class="card-image">      
                    {% endif %}
                    <div class="card-content">
                        {% if event.terms('event-categories') %}<label class="bg-primary text-primary-contrast">{{event.terms('event-categories')|first.name}}</label>{% endif %}
                        <h4>{{event.post_title}}</h4>
                        
                        <p class="card-text">{{event.post_excerpt|excerpt(20)}}</p>

                        <span class="card-footer text-gray-500 text-xs flex items-center mt-auto">
                            <i class="material-icons text-xs mr-2 ">event</i>
                            <span>
                            {% if event._event_start_date == event._event_end_date %}
                            {{ event._event_start_date|date("j. F Y") }} {{ __("from", "ctx-theme") }} {{ event._event_start_time|date(site.option("dbem_time_format"), false) }} {{ __("to", "ctx-theme") }} {{ event._event_end_time|date(site.option("dbem_time_format"), false) }} {{ __("o'clock", "ctx-theme") }}
                            {% else %}
                            {{ event._event_start_date|date("j. F") }} {{ __("to", "ctx-theme") }} {{ event._event_end|date("j. F Y") }}  
                            {% endif %}
                            </span>
                        </span>
                        
                    </div>
                    
                </a>
            {% endfor %}
        </article>
    </section>
    <div class="">{{ function( 'apply_filters', 'the_content', post.content ) }}</div>

    </div>
</div>  
{% endblock %}
