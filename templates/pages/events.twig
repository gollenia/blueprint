{% extends "master.twig" %}

{% block content %}
    
        
<header  class="bg-cover" style="background-position: {{post.headerimageorientation}}; background-image: url('{{ post.thumbnail.src('xlarge') }}')">
    {% include "partials/breadcrumbs.twig" with {'breadcrumbs': breadcrumbs} %}
    <div  style="margin-top: {{post.headerheight}}vh;"  class="max-w-screen-xl mx-auto">
        <div class="relative inline-block bg-primary-transparent bg-blur  rounded-tr-lg text-white text-right" style="margin-left: -2000px; padding: 50px 50px 50px 2000px;">
            <h1 class="ml-4 md:ml-8 xl:mr-0 font-script">{{post.title}}</h1>
            <h3 class="ml-4 md:ml-8 xl:mr-0">{{post.subtitle}}</h3>
            {%if post.headerurl %}<a target="{{post.headerurl.target}}" href="{{ post.headerurl.url }}" class="absolute right-0 rounded-tl-md rounded-br-md mr-8 top-0 -mt-4 px-4 py-2 text-xl bg-primary-dark ctx-icon ctx-icon-arrow-forward">{{ post.headerurl.title }}</a>{% endif %}
        </div>
    </div>
    
</header>        
   
<div x-data="{filter: ''}" class="bg-default">
    <div class="bg-primary-light">
        <div class="flex flex-row items-center max-w-screen-xl mx-auto py-20">
            <span class="font-script mr-4 ">WÃ¤hlen Sie eine Kategorie</span>
            <ul class="">
                <li class="inline-block">
                    <span :class="{'bg-primary text-primary-contrast': filter === ''}" 
                    class="px-3 py-2 bg-lightgray " @click="filter = ''" href="#">Alle</span>
                </li>
                {% for term in terms %}
                    <li class="inline-block"><span :class="{'bg-primary text-primary-contrast': filter === '{{term.slug}}'}" class="ml-4 px-3 py-2 bg-lightgray inline-block" @click="filter = '{{term.slug}}'" href="#">{{term.name}}</span></li>
                {% endfor %}
            </ul>
        </div>
    </div>


   
    <div class="">{{ function( 'apply_filters', 'the_content', post.content ) }}</div>


    <article class="gap-20 max-w-screen-xl mx-auto grid grid-cols-1 lg:grid-cols-2 my-20">        
        {% for event in events %}
            <section 
                x-show="filter == '' || [{% for term in event.get_terms('event-categories') %}'{{term.slug}}'{% endfor %}].includes(filter)" 
                class="relative bg-white shadow-lg event {% for term in event.get_terms('event-categories') %}{{term.slug}}{% endfor %}"
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 transform scale-90"
                x-transition:enter-end="opacity-100 transform scale-100"
                x-transition:leave="transition ease-in duration-300"
                x-transition:leave-start="opacity-100 transform scale-100"
                x-transition:leave-end="opacity-0 transform scale-90"
            >
                <span class="absolute top-0 -mt-3 px-2 py-1 bg-gray text-white rounded-tl rounded-br ml-10">{{event.get_terms('audience')|first}}</span>
                <div class="">
                        <img src="{{ event.thumbnail.src('medium') }}" class="">
                        
                </div>
                <div class="p-10">
                    <h3 class="mb-6">{{event.post_title}}</h3>
                    <div class="flex flex-row items-center">
                        <img src="{{ site.theme.uri }}/assets/img/icons/calendar.svg" width="24" class="mr-3">
                        <span>
                            {% if event._event_start_date == event._event_end_date %}
                            {{ event._event_start_date|date("j. F Y") }} von {{ event._event_start_time|date("G:i") }} bis {{ event._event_end_time|date("G:i") }} Uhr
                            {% else %}
                            {{ event._event_start_date|date("j. F") }} bis {{ event._event_end|date("j. F Y") }}
                                
                            {% endif %}
                        </span>
                    </div>
                   
                    <p class="my-4">{{event.post_excerpt}}</p>
                    <div class="text-right"><a href="/{{slug}}/{{event.slug}}" class="inline-block px-4 py-2 bg-primary text-primary-contrast rounded-tl rounded-br">Weitere Informationen</a></div>
                </div>
                   
            </section>
        {% endfor %}
    </article>

    </div>
</div>  
{% endblock %}